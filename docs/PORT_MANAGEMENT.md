# ç«¯å£ç®¡ç†ç³»ç»Ÿ

Simple Memory MCP é‡‡ç”¨æ™ºèƒ½ç«¯å£ç®¡ç†ç³»ç»Ÿï¼Œè‡ªåŠ¨å¤„ç†ç«¯å£åˆ†é…ã€å†²çªæ£€æµ‹å’ŒæŒä¹…åŒ–å­˜å‚¨ã€‚

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### ğŸ” æ™ºèƒ½ç«¯å£æ£€æµ‹
- è‡ªåŠ¨æ£€æµ‹ç«¯å£å¯ç”¨æ€§
- é¿å…ç«¯å£å†²çªï¼Œä¸å¼ºåˆ¶ç»ˆæ­¢å…¶ä»–è¿›ç¨‹
- æ”¯æŒç«¯å£èŒƒå›´æ‰«æ

### ğŸ“‹ ç«¯å£åˆ†é…ç­–ç•¥
- **ä¼˜å…ˆçº§é¡ºåº**: ä¸Šæ¬¡ä½¿ç”¨ â†’ é¦–é€‰ç«¯å£ â†’ é…ç½®èŒƒå›´ â†’ å¤‡ç”¨èŒƒå›´ â†’ å…¨å±€æ‰«æ
- **æŒä¹…åŒ–å­˜å‚¨**: è®°ä½ä¸Šæ¬¡åˆ†é…çš„ç«¯å£ï¼Œé‡å¯æ—¶ä¼˜å…ˆä½¿ç”¨
- **æ™ºèƒ½é¿è®©**: é‡åˆ°å†²çªæ—¶è‡ªåŠ¨å¯»æ‰¾æ›¿ä»£ç«¯å£

### ğŸ› ï¸ ç»Ÿä¸€é…ç½®ç®¡ç†
- é›†ä¸­å¼ç«¯å£é…ç½®æ–‡ä»¶
- æ”¯æŒç¯å¢ƒç‰¹å®šé…ç½®
- å¯é…ç½®çš„ç«¯å£èŒƒå›´å’Œç­–ç•¥

## ğŸ“ é…ç½®æ–‡ä»¶

### ç«¯å£é…ç½® (`src/config/ports.config.js`)

```javascript
export const PortConfig = {
    services: {
        web: {
            name: 'Webç®¡ç†ç•Œé¢',
            preferred: 8011,           // é¦–é€‰ç«¯å£
            range: [8010, 8020],       // å¯ç”¨ç«¯å£èŒƒå›´
            fallback: [3000, 3010],    // å¤‡ç”¨ç«¯å£èŒƒå›´
            protocol: 'http',
            autoOpen: true             // æ˜¯å¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
        }
    },
    
    global: {
        scanRange: { start: 8000, end: 9000 },
        strategy: {
            priority: ['last_used', 'preferred', 'range', 'fallback', 'scan'],
            avoidKilling: true,
            onConflict: 'find_alternative'
        }
    }
};
```

### æŒä¹…åŒ–å­˜å‚¨ (`data/ports.json`)

ç³»ç»Ÿè‡ªåŠ¨ç»´æŠ¤ç«¯å£åˆ†é…å†å²ï¼š

```json
{
    "timestamp": "2024-12-19T10:30:00.000Z",
    "ttl": 86400000,
    "ports": {
        "web": {
            "port": 8011,
            "service": "web",
            "allocatedAt": "2024-12-19T10:30:00.000Z",
            "config": { ... }
        }
    }
}
```

## ğŸš€ ä½¿ç”¨æ–¹å¼

### 1. æ¨èå¯åŠ¨æ–¹å¼

```bash
# ä½¿ç”¨æ™ºèƒ½ç«¯å£ç®¡ç†å¯åŠ¨
node start-web.js
```

**ç‰¹æ€§**:
- âœ… è‡ªåŠ¨ç«¯å£æ£€æµ‹å’Œåˆ†é…
- âœ… å½©è‰²è¾“å‡ºå’ŒçŠ¶æ€æç¤º
- âœ… è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨åˆ°æ­£ç¡®ç«¯å£
- âœ… ä¼˜é›…å…³é—­å’Œç«¯å£é‡Šæ”¾

### 2. ä¼ ç»Ÿå¯åŠ¨æ–¹å¼

```bash
# ç›´æ¥å¯åŠ¨ï¼ˆä½¿ç”¨åŠ¨æ€ç«¯å£åˆ†é…ï¼‰
npm run web
```

### 3. Shellè„šæœ¬å¯åŠ¨

```bash
# Linux/macOS
./start-web.sh
```

## ğŸ”§ ç«¯å£ç®¡ç†API

### PortManager ç±»

```javascript
import { portManager } from './src/services/PortManager.js';

// åˆ†é…ç«¯å£
const port = await portManager.allocatePort('web');

// æ£€æŸ¥ç«¯å£å¯ç”¨æ€§
const available = await portManager.checkPortAvailable(8011);

// é‡Šæ”¾ç«¯å£
await portManager.releasePort('web');

// è·å–å·²åˆ†é…ç«¯å£
const allocatedPorts = portManager.getAllocatedPorts();
```

### Web API

```bash
# è·å–ç³»ç»Ÿä¿¡æ¯ï¼ˆåŒ…æ‹¬ç«¯å£ä¿¡æ¯ï¼‰
GET /api/system/info
```

å“åº”ç¤ºä¾‹ï¼š
```json
{
    "success": true,
    "systemInfo": {
        "currentPort": 8011,
        "allocatedPorts": {
            "web": {
                "port": 8011,
                "service": "web",
                "allocatedAt": "2024-12-19T10:30:00.000Z"
            }
        },
        "timestamp": "2024-12-19T10:30:00.000Z",
        "version": "1.0.0"
    }
}
```

## ğŸ¨ ç”¨æˆ·ç•Œé¢

### ç«¯å£ä¿¡æ¯æ˜¾ç¤º
- Webç•Œé¢å³ä¸‹è§’æ˜¾ç¤ºå½“å‰ç«¯å£å·
- é¼ æ ‡æ‚¬åœæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
- å®æ—¶æ›´æ–°ç«¯å£çŠ¶æ€

### å¯åŠ¨æ—¥å¿—
```
ğŸ§  Simple Memory MCP Webç®¡ç†ç•Œé¢
==================================================
âœ… Node.jsç‰ˆæœ¬æ£€æŸ¥é€šè¿‡: v18.17.0
ğŸ” æ­£åœ¨åˆ†é…ç«¯å£...
âœ… å·²åˆ†é…ç«¯å£: 8011
ğŸš€ å¯åŠ¨WebæœåŠ¡å™¨...
ğŸ“ æœåŠ¡å™¨åœ°å€: http://localhost:8011
ğŸŒ æ­£åœ¨æ‰“å¼€æµè§ˆå™¨...
âœ… æµè§ˆå™¨å·²æ‰“å¼€
```

## ğŸ› ï¸ é«˜çº§é…ç½®

### ç¯å¢ƒç‰¹å®šé…ç½®

```javascript
// å¼€å‘ç¯å¢ƒ
NODE_ENV=development node start-web.js

// ç”Ÿäº§ç¯å¢ƒ
NODE_ENV=production node start-web.js
```

### è‡ªå®šä¹‰ç«¯å£èŒƒå›´

ä¿®æ”¹ `src/config/ports.config.js`:

```javascript
services: {
    web: {
        preferred: 9000,
        range: [9000, 9010],
        fallback: [8000, 8010]
    }
}
```

### ç¦ç”¨ç«¯å£æŒä¹…åŒ–

```javascript
global: {
    persistence: {
        enabled: false
    }
}
```

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q: ç«¯å£åˆ†é…å¤±è´¥**
```
âŒ ç«¯å£åˆ†é…å¤±è´¥: æ— æ³•ä¸ºæœåŠ¡ "web" åˆ†é…ç«¯å£ï¼šæ‰€æœ‰å°è¯•éƒ½å¤±è´¥äº†
```

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥é…ç½®çš„ç«¯å£èŒƒå›´æ˜¯å¦åˆç†
2. ç¡®ä¿æœ‰è¶³å¤Ÿçš„å¯ç”¨ç«¯å£
3. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

**Q: æŒä¹…åŒ–æ–‡ä»¶æŸå**
```
âš ï¸ åŠ è½½ç«¯å£ä¿¡æ¯å¤±è´¥: Unexpected token
```

**è§£å†³æ–¹æ¡ˆ**:
```bash
# åˆ é™¤æŸåçš„æŒä¹…åŒ–æ–‡ä»¶
rm data/ports.json
# é‡æ–°å¯åŠ¨æœåŠ¡
node start-web.js
```

**Q: ç«¯å£å†²çª**

ç³»ç»Ÿä¼šè‡ªåŠ¨å¤„ç†ç«¯å£å†²çªï¼Œæ— éœ€æ‰‹åŠ¨å¹²é¢„ã€‚å¦‚æœéœ€è¦å¼ºåˆ¶ä½¿ç”¨ç‰¹å®šç«¯å£ï¼š

```javascript
// ä¸´æ—¶ä¿®æ”¹é…ç½®
const port = await portManager.allocatePort('web');
```

### è°ƒè¯•æ¨¡å¼

```bash
# å¯ç”¨è¯¦ç»†æ—¥å¿—
DEBUG=port-manager node start-web.js
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### ç«¯å£æ‰«æä¼˜åŒ–
- é»˜è®¤æ‰«æèŒƒå›´: 8000-9000
- å¯é…ç½®æ‰«æè¶…æ—¶: 3ç§’
- æ™ºèƒ½è·³è¿‡ä¿ç•™ç«¯å£

### å†…å­˜ä½¿ç”¨
- è½»é‡çº§ç«¯å£ç®¡ç†å™¨
- æœ€å°åŒ–æŒä¹…åŒ–æ•°æ®
- è‡ªåŠ¨æ¸…ç†è¿‡æœŸè®°å½•

## ğŸ”’ å®‰å…¨è€ƒè™‘

### ç«¯å£å®‰å…¨
- é¿å…ä½¿ç”¨ç³»ç»Ÿä¿ç•™ç«¯å£
- ä¸æš´éœ²æ•æ„Ÿç«¯å£ä¿¡æ¯
- æ”¯æŒæœ¬åœ°ç»‘å®šé™åˆ¶

### æƒé™ç®¡ç†
- æ— éœ€ç®¡ç†å‘˜æƒé™
- ç”¨æˆ·çº§ç«¯å£èŒƒå›´
- å®‰å…¨çš„ç«¯å£é‡Šæ”¾

---

æ›´å¤šæŠ€æœ¯ç»†èŠ‚è¯·å‚è€ƒï¼š
- [å¼€å‘æ–‡æ¡£](DEVELOPMENT.md)
- [APIæ–‡æ¡£](API.md)
- [ç”¨æˆ·æŒ‡å—](USER_GUIDE.md)
